{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../shared/list-header.component\";\nimport * as i4 from \"../shared/modal.component\";\nimport * as i5 from \"./product-list.component\";\nimport * as i6 from \"./product-detail.component\";\nfunction ProductsComponent_div_3_app_product_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-product-list\", 8);\n    i0.ɵɵlistener(\"selected\", function ProductsComponent_div_3_app_product_list_1_Template_app_product_list_selected_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.select($event));\n    })(\"deleted\", function ProductsComponent_div_3_app_product_list_1_Template_app_product_list_deleted_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.askToDelete($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const products_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵproperty(\"products\", products_r1);\n  }\n}\nfunction ProductsComponent_div_3_app_product_detail_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-product-detail\", 9);\n    i0.ɵɵlistener(\"unselect\", function ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_unselect_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.clear());\n    })(\"save\", function ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_save_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.save($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"product\", ctx_r3.selected);\n  }\n}\nfunction ProductsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, ProductsComponent_div_3_app_product_list_1_Template, 1, 1, \"app-product-list\", 6);\n    i0.ɵɵtemplate(2, ProductsComponent_div_3_app_product_detail_2_Template, 1, 1, \"app-product-detail\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.selected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selected);\n  }\n}\nexport class ProductsComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.message = '?';\n    this.showModal = false;\n    this.products$ = productService.entities$;\n  }\n  ngOnInit() {\n    this.getProducts();\n  }\n  add(product) {\n    this.productService.add(product, {\n      isOptimistic: false\n    });\n  }\n  askToDelete(product) {\n    this.productToDelete = product;\n    this.showModal = true;\n    if (this.productToDelete.name) {\n      this.message = `Would you like to delete ${this.productToDelete.name}?`;\n    }\n  }\n  clear() {\n    this.selected = null;\n  }\n  closeModal() {\n    this.showModal = false;\n  }\n  deleteProduct() {\n    this.closeModal();\n    if (this.productToDelete) {\n      this.productService.delete(this.productToDelete.id).subscribe(() => this.productToDelete = null);\n    }\n    this.clear();\n  }\n  enableAddMode() {\n    this.selected = {};\n  }\n  getProducts() {\n    this.productService.getAll();\n    this.clear();\n  }\n  save(product) {\n    if (this.selected && this.selected.name) {\n      this.update(product);\n    } else {\n      this.add(product);\n    }\n  }\n  select(product) {\n    this.selected = product;\n  }\n  update(product) {\n    this.productService.update(product);\n  }\n}\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n};\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  decls: 6,\n  vars: 5,\n  consts: [[1, \"content-container\"], [\"title\", \"Products\", 3, \"add\", \"refresh\"], [1, \"columns\", \"is-multiline\", \"is-variable\"], [\"class\", \"column is-8\", 4, \"ngIf\"], [1, \"modal-product\", 3, \"message\", \"isOpen\", \"handleNo\", \"handleYes\"], [1, \"column\", \"is-8\"], [3, \"products\", \"selected\", \"deleted\", 4, \"ngIf\"], [3, \"product\", \"unselect\", \"save\", 4, \"ngIf\"], [3, \"products\", \"selected\", \"deleted\"], [3, \"product\", \"unselect\", \"save\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"app-list-header\", 1);\n      i0.ɵɵlistener(\"add\", function ProductsComponent_Template_app_list_header_add_1_listener() {\n        return ctx.enableAddMode();\n      })(\"refresh\", function ProductsComponent_Template_app_list_header_refresh_1_listener() {\n        return ctx.getProducts();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵtemplate(3, ProductsComponent_div_3_Template, 3, 2, \"div\", 3);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"app-modal\", 4);\n      i0.ɵɵlistener(\"handleNo\", function ProductsComponent_Template_app_modal_handleNo_5_listener() {\n        return ctx.closeModal();\n      })(\"handleYes\", function ProductsComponent_Template_app_modal_handleYes_5_listener() {\n        return ctx.deleteProduct();\n      });\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 3, ctx.products$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"message\", ctx.message)(\"isOpen\", ctx.showModal);\n    }\n  },\n  dependencies: [i2.NgIf, i3.ListHeaderComponent, i4.ModalComponent, i5.ProductListComponent, i6.ProductDetailComponent, i2.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","ProductsComponent","constructor","productService","products$","entities$","ngOnInit","getProducts","add","product","isOptimistic","askToDelete","productToDelete","showModal","name","message","clear","selected","closeModal","deleteProduct","delete","id","subscribe","enableAddMode","getAll","save","update","select","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Vongai\\Vongai Code\\Microsoft courses\\my-static-web-app-and-api\\angular-app\\src\\app\\products\\products.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Product } from '../core';\r\nimport { ProductService } from './product.service';\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  template: `\r\n    <div class=\"content-container\">\r\n      <app-list-header\r\n        title=\"Products\"\r\n        (add)=\"enableAddMode()\"\r\n        (refresh)=\"getProducts()\"\r\n      ></app-list-header>\r\n      <div class=\"columns is-multiline is-variable\">\r\n        <div class=\"column is-8\" *ngIf=\"products$ | async as products\">\r\n          <app-product-list\r\n            *ngIf=\"!selected\"\r\n            [products]=\"products\"\r\n            (selected)=\"select($event)\"\r\n            (deleted)=\"askToDelete($event)\"\r\n          ></app-product-list>\r\n          <app-product-detail\r\n            *ngIf=\"selected\"\r\n            [product]=\"selected\"\r\n            (unselect)=\"clear()\"\r\n            (save)=\"save($event)\"\r\n          ></app-product-detail>\r\n        </div>\r\n      </div>\r\n\r\n      <app-modal\r\n        class=\"modal-product\"\r\n        [message]=\"message\"\r\n        [isOpen]=\"showModal\"\r\n        (handleNo)=\"closeModal()\"\r\n        (handleYes)=\"deleteProduct()\"\r\n      ></app-modal>\r\n    </div>\r\n  `,\r\n})\r\nexport class ProductsComponent implements OnInit {\r\n  selected: Product;\r\n  products$: Observable<Product[]>;\r\n  message = '?';\r\n  productToDelete: Product;\r\n  showModal = false;\r\n\r\n  constructor(private productService: ProductService) {\r\n    this.products$ = productService.entities$;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getProducts();\r\n  }\r\n\r\n  add(product: Product) {\r\n    this.productService.add(product, {isOptimistic: false});\r\n  }\r\n\r\n  askToDelete(product: Product) {\r\n    this.productToDelete = product;\r\n    this.showModal = true;\r\n    if (this.productToDelete.name) {\r\n      this.message = `Would you like to delete ${this.productToDelete.name}?`;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.selected = null;\r\n  }\r\n\r\n  closeModal() {\r\n    this.showModal = false;\r\n  }\r\n\r\n  deleteProduct() {\r\n    this.closeModal();\r\n    if (this.productToDelete) {\r\n      this.productService\r\n        .delete(this.productToDelete.id)\r\n        .subscribe(() => (this.productToDelete = null));\r\n    }\r\n    this.clear();\r\n  }\r\n\r\n  enableAddMode() {\r\n    this.selected = <any>{};\r\n  }\r\n\r\n  getProducts() {\r\n    this.productService.getAll();\r\n    this.clear();\r\n  }\r\n\r\n  save(product: Product) {\r\n    if (this.selected && this.selected.name) {\r\n      this.update(product);\r\n    } else {\r\n      this.add(product);\r\n    }\r\n  }\r\n\r\n  select(product: Product) {\r\n    this.selected = product;\r\n  }\r\n\r\n  update(product: Product) {\r\n    this.productService.update(product);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}